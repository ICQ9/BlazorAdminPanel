using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Threading.Tasks;

namespace AdminPanel.Shared.Models
{
    public class PermissionCommand
    {
        public int UserId { get; set; }
        public int SubscriptionId { get; set; }
        public IEnumerable<PermissionObject> Permissions { get; set; }
    }
    public class PermissionObject
    {
        [JsonPropertyName("key")]
        public string Key { get; set; }

        [JsonPropertyName("accessType")]
        public string AccessType { get; set; }

        [JsonPropertyName("value")]
        public bool Value { get; set; }

        // JSON uses numeric types, so we keep this as string and let the deserializer coerce,
        // or you can change to int if you prefer strongly-typed.
        [JsonPropertyName("type")]
        public string Type { get; set; }

        /// <summary>
        /// Returns a fully-populated PermissionsContainer,
        /// deserialized from the embedded JSON payload.
        /// </summary>
        public static PermissionsContainer LoadAll()
        {
            const string payload = @"""
            {""permissions"":[{""key"":""spendTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.SpendsTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.evCPMSpendTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPMSpendTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPCSpendTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPVSpendTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""inventoryCostTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPMInventoryCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPCInventoryCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.evCPMInventoryCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPVInventoryCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.InventoryCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""techFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.TechFee"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""dmpCostTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.DmpCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""creativeFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.CreativeFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""inventoryFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.InventoryFeeTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""dmpFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.DmpFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""creativeCostTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.CreativeCostTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""profileFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.ProfileFeeTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""profitTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.ProfitTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""revenueTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.RevenueTradedesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPVTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPCTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.evCPMTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""report.eCPMTradeDesk"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""spendTradeDeskList"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""ecpmTradeDeskList"",""value"":true,""type"":0,""accessType"":""view""},{""key"":""balance"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""balance"",""value"":false,""type"":1,""accessType"":""add""},{""key"":""balance"",""value"":false,""type"":1,""accessType"":""edit""},{""key"":""balance"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""userManagement"",""value"":false,""type"":1,""accessType"":""add""},{""key"":""userManagement"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""userManagement"",""value"":false,""type"":1,""accessType"":""edit""},{""key"":""userManagement"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""advertiser"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""advertiser"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""advertiser"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""advertiser"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""campaign"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""campaign"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""campaign"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""campaign"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""aditem"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""aditem"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""aditem"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""aditem"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""profile"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""profile"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""profile"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""profile"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""doohCampaign"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""doohCampaign"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""doohCampaign"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""doohCampaign"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""doohAditem"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""doohAditem"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""doohAditem"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""doohAditem"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""doohProfile"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""doohProfile"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""doohProfile"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""doohProfile"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""creative"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""creative"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""creative"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""creative"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""productFeed"",""value"":false,""type"":1,""accessType"":""add""},{""key"":""productFeed"",""value"":false,""type"":1,""accessType"":""view""},{""key"":""productFeed"",""value"":false,""type"":1,""accessType"":""edit""},{""key"":""productFeed"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""creative.dco"",""value"":false,""type"":1,""accessType"":""add""},{""key"":""creative.dco"",""value"":false,""type"":1,""accessType"":""view""},{""key"":""creative.dco"",""value"":false,""type"":1,""accessType"":""edit""},{""key"":""creative.dco"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""audienceGroup"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""audienceGroup"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""audienceGroup"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""audienceGroup"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""customDmp"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""customDmp"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""customDmp"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""customDmp"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""offlineReports"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""offlineReports"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""offlineReports"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""offlineReports"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""widgets"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""widgets"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""widgets"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""widgets"",""value"":true,""type"":1,""accessType"":""delete""},{""key"":""presets"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""presets"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""presets"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""presets"",""value"":false,""type"":1,""accessType"":""delete""},{""key"":""creative.bulkUpload"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""creative.bulkUpload"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""creative.bulkUpload"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""creative.bulkUpload"",""value"":true,""type"":1,""accessType"":""delete""},{""key"":""aditem.codes"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""aditem.codes"",""value"":true,""type"":1,""accessType"":""add""},{""key"":""aditem.codes"",""value"":true,""type"":1,""accessType"":""edit""},{""key"":""aditem.codes"",""value"":true,""type"":1,""accessType"":""delete""},{""key"":""advertiserBalance"",""value"":true,""type"":1,""accessType"":""view""},{""key"":""advertiserBalance"",""value"":false,""type"":1,""accessType"":""add""},{""key"":""advertiserBalance"",""value"":false,""type"":1,""accessType"":""edit""},{""key"":""advertiserBalance"",""value"":false,""type"":1,""accessType"":""delete""}]}""";

            return JsonSerializer.Deserialize<PermissionsContainer>(payload,
                     new JsonSerializerOptions { PropertyNameCaseInsensitive = true })
                   ?? throw new InvalidOperationException("Failed to load default permissions");
        }
    }

    public class PermissionsContainer
    {
        [JsonPropertyName("permissions")]
        public List<PermissionObject> Permissions { get; set; }
    }
}
